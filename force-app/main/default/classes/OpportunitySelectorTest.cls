@IsTest 
private class OpportunitySelectorTest { 
    // ğŸ† Classe de test pour vÃ©rifier que OpportunitySelector fonctionne correctement

    //private static Id testAccountId; 
    // Variable pour stocker l'ID du compte de test

    // @TestSetup 
    // static void setup() { 
    //     // âš™ï¸ PrÃ©paration des donnÃ©es de test
    //     // ğŸ”¹ Ã‰tape 1 : CrÃ©er et insÃ©rer un compte de test
    //     Account testAccount = TestDataFactory.createTestAccount(); 
    //     // Appelle une mÃ©thode de fabrique qui crÃ©e un compte de test et l'insert
    //     insert testAccount;

    //     //testAccountId = testAccount.Id; 
    //     // Stocke l'ID du compte pour le rÃ©utiliser dans le test

    //     // ğŸ”¹ Ã‰tape 2 : CrÃ©er et insÃ©rer 2 opportunitÃ©s liÃ©es Ã  ce compte
    //     List<Opportunity> testOpportunities = TestDataFactory.createTestOpportunities(testAccount.Id, 2); 
    //     // CrÃ©e 2 opportunitÃ©s associÃ©es Ã  ce compte et les insÃ¨re dans la base de donnÃ©es (pendant les tests)
    //     insert testOpportunities;
        
    // }

    @IsTest 
    static void testGetOpportunitiesByAccountId() { 
        // ğŸ¯ Test principal : VÃ©rifie si la mÃ©thode retourne les bonnes opportunitÃ©s
        Account testAccount = TestDataFactory.createTestAccount();
        insert testAccount;

        List<Opportunity> testOpportunities = TestDataFactory.createTestOpportunities(testAccount.Id, 2);
        insert testOpportunities;

        Test.startTest(); 
        // â³ DÃ©marre le contexte de test (permet dâ€™exÃ©cuter la mÃ©thode en conditions rÃ©elles)

        List<Opportunity> results = OpportunitySelector.getOpportunitiesByAccountId(testAccount.Id); 
        // ğŸ” Appelle la mÃ©thode que l'on veut tester

        Test.stopTest(); 
        // â¹ï¸ ArrÃªte le contexte de test

        // âœ… VÃ©rifications (Assertions)
        System.assertNotEquals(0, results.size(), 'Should return at least one opportunity'); 
        // VÃ©rifie que la liste contient au moins une opportunitÃ©

        System.assertEquals(2, results.size(), 'Should return exactly two opportunity'); 
        // VÃ©rifie qu'on a exactement 2 opportunitÃ©s (puisqu'on en a insÃ©rÃ© 2)
    }

    @IsTest 
    static void testGetZeroOpportunitiesByAccountId() { 
        // ğŸ¯ Test principal : VÃ©rifie si la mÃ©thode retourne les bonnes opportunitÃ©s
        Account testAccount = TestDataFactory.createTestAccount();
        insert testAccount;

        Test.startTest(); 
        // â³ DÃ©marre le contexte de test (permet dâ€™exÃ©cuter la mÃ©thode en conditions rÃ©elles)

        List<Opportunity> results = OpportunitySelector.getOpportunitiesByAccountId(testAccount.Id); 
        // ğŸ” Appelle la mÃ©thode que l'on veut tester

        Test.stopTest(); 
        // â¹ï¸ ArrÃªte le contexte de test

        // âœ… VÃ©rifications (Assertions)
        System.assertEquals(0, results.size(), 'Should return zero opportunity'); 
        // VÃ©rifie que la liste contient au moins une opportunitÃ©

    }

    
     @IsTest 
    static void testGetOpportunitiesByAccountIdWithNullId() { 
        // ğŸ¯ Test principal : VÃ©rifie si la mÃ©thode retourne les bonnes opportunitÃ©s

        Test.startTest(); 
        // â³ DÃ©marre le contexte de test (permet dâ€™exÃ©cuter la mÃ©thode en conditions rÃ©elles)

        List<Opportunity> results = OpportunitySelector.getOpportunitiesByAccountId(null); 
        // ğŸ” Appelle la mÃ©thode que l'on veut tester

        Test.stopTest(); 
        // â¹ï¸ ArrÃªte le contexte de test

        // âœ… VÃ©rifications (Assertions)
        System.assertEquals(0, results.size(), 'Should return zero opportunity'); 
        // VÃ©rifie que la liste contient au moins une opportunitÃ©

    }
    // @IsTest 
    // static void testGetOpportunitiesByAccountIdWithNullId() { 
    //     // ğŸ¯ Test pour vÃ©rifier le comportement quand l'ID est null

    //     try { 
    //         Test.startTest(); 
    //         // â³ DÃ©marre le contexte de test

    //         OpportunitySelector.getOpportunitiesByAccountId(null); 
    //         // ğŸ” Appelle la mÃ©thode avec un ID null (ce qui devrait provoquer une exception)

    //         Test.stopTest(); 
    //         // â¹ï¸ ArrÃªte le contexte de test

    //         System.assert(false, 'Expected an exception but did not get one'); 
    //         // âŒ Si aucune exception nâ€™est levÃ©e, le test Ã©choue
    //     } catch (AuraHandledException e) { 
    //         // âœ… Si une exception est levÃ©e, le test rÃ©ussit
    //         System.assertEquals('L\'ID du compte ne peut pas Ãªtre vide.', e.getMessage(), 'Exception message should match');
    //         // VÃ©rifie que le message de l'exception est correct
    //     }
    // }
}
