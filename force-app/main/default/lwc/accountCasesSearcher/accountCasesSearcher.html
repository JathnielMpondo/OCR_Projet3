<template>
    <!-- Le composant Lightning Card fournit un cadre stylisé avec un titre et une icône -->
    <lightning-card title="Recherche d'incident par Sujet" icon-name="standard:case"> <!-- Icône de Case  -->

        <!-- Un peu d'espacement interne (padding) pour aérer le contenu -->
        <div class="slds-p-around_medium"> <!-- Classe CSS de SLDS pour l'espacement -->

            <!-- Champ input pour saisir le terme de recherche (sujet du Case) -->
            <lightning-input 
                label="Rechercher par Sujet" 
                value={searchTerm} 
                onchange={updateSearchTerm}>
            </lightning-input>

            <!-- Bouton pour lancer la recherche -->
            <lightning-button 
                label="Rechercher" 
                variant="brand" 
                onclick={handleSearch} 
                class="slds-m-top_small">
            </lightning-button>
        </div>

        <!-- Si des résultats sont présents dans "cases", afficher la datatable -->
        <template if:true={cases}>
            <lightning-datatable 
                data={cases} 
                columns={columns} 
                key-field="Id">
            </lightning-datatable>
        </template>

        <!-- Si une erreur est présente, afficher le message d'erreur -->
<template if:true={error}>
    <p class="slds-p-around_medium slds-text-color_error slds-theme_error slds-box">
        {error}
    </p>
</template>
        <!-- Si aucune donnée n'est trouvée, afficher un message d'information -->
        <template if:true={noData}>
            <p class="slds-p-around_medium slds-text-color_success slds-theme_success slds-box">
                Aucune donnée trouvée.
            </p>
        </template>
        <!-- Si le composant est en cours de chargement, afficher un message de chargement -->
        <template if:true={isLoading}>
            <p class="slds-p-around_medium slds-text-color_success slds-theme_success slds-box">
                Chargement des données...
            </p>
        </template>

    </lightning-card>
</template>
